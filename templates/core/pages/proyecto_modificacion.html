{% extends "core/layout.html" %}

{% block title %}SWGFV - Modificación de Proyecto{% endblock %}

{% block page_content %}
<div class="card shadow-sm bg-glass">
  <div class="card-body p-3 p-md-4">

    <h2 class="text-center mb-4" style="color: var(--swgfv-primary); font-weight: 800;">
      Modificación de Proyecto
    </h2>

    <!-- BUSQUEDA -->
    <form method="GET" class="mb-4">
      <div class="row g-3">
        <div class="col-12 col-md-3">
          <label class="form-label fw-bold">ID</label>
          <input type="text" name="id" value="{{ q_id }}" class="form-control" placeholder="ID Proyecto">
        </div>

        <div class="col-12 col-md-4">
          <label class="form-label fw-bold">Nombre del proyecto</label>
          <input type="text" name="nombre" value="{{ q_nombre }}" class="form-control" placeholder="Proyecto">
        </div>

        <div class="col-12 col-md-5">
          <label class="form-label fw-bold">Empresa</label>
          <input type="text" name="empresa" value="{{ q_empresa }}" class="form-control" placeholder="Empresa">
        </div>
      </div>

      <div class="d-flex justify-content-center gap-2 mt-3">
        <button type="submit" class="btn btn-swgfv px-4">Buscar</button>
        <a href="{% url 'core:proyecto_modificacion' %}" class="btn btn-outline-secondary px-4">Limpiar</a>
      </div>
    </form>

    <!-- LISTA -->
    {% if mostrar_lista %}
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>Proyecto</th>
              <th>Empresa</th>
              <th>Usuario</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            {% for p in proyectos %}
            <tr>
              <td>{{ p.id }}</td>
              <td>{{ p.Nombre_Proyecto }}</td>
              <td>{{ p.Nombre_Empresa|default:"—" }}</td>
              <td>{{ p.ID_Usuario.Correo_electronico }}</td>
              <td>
                <a class="btn btn-sm btn-primary"
                   href="{% url 'core:proyecto_modificacion' %}?id={{ p.id }}">
                  Seleccionar
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="text-center">Sin resultados</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-info">
        Realiza una búsqueda para mostrar proyectos.
      </div>
    {% endif %}

  </div>
</div>
{% endblock %}
